# Treacibility Matrix Verifications

This document contains treacibility matrix related verification tests.

## Traceability Matrix Verifications
```mermaid
graph LR;
  %% REQVIRE-AUTOGENERATED-DIAGRAM
  %% Graph styling
  classDef requirement fill:#f9d6d6,stroke:#f55f5f,stroke-width:1px;
  classDef verification fill:#d6f9d6,stroke:#5fd75f,stroke-width:1px;
  classDef externalLink fill:#d0e0ff,stroke:#3080ff,stroke-width:1px;
  classDef default fill:#f5f5f5,stroke:#333333,stroke-width:1px;

  62b41611d85d4161["SVG Matrix Output Test"];
  class 62b41611d85d4161 verification;
  click 62b41611d85d4161 "TreacibilityMatrix.md#svg-matrix-output-test";
  8aec4f4d071ac12c["test.sh"];
  class 8aec4f4d071ac12c default;
  click 8aec4f4d071ac12c "../../tests/test-matrix-generation/test.sh";
  62b41611d85d4161 -->|satisfiedBy| 8aec4f4d071ac12c;
  7f6c7f917ed529ae["CLI Traces Flag Test"];
  class 7f6c7f917ed529ae verification;
  click 7f6c7f917ed529ae "TreacibilityMatrix.md#cli-traces-flag-test";
  8aec4f4d071ac12c["test.sh"];
  class 8aec4f4d071ac12c default;
  click 8aec4f4d071ac12c "../../tests/test-matrix-generation/test.sh";
  7f6c7f917ed529ae -->|satisfiedBy| 8aec4f4d071ac12c;
  aa85c85e7c41d899["Traceability Matrix Generation Test"];
  class aa85c85e7c41d899 verification;
  click aa85c85e7c41d899 "TreacibilityMatrix.md#traceability-matrix-generation-test";
  8aec4f4d071ac12c["test.sh"];
  class 8aec4f4d071ac12c default;
  click 8aec4f4d071ac12c "../../tests/test-matrix-generation/test.sh";
  aa85c85e7c41d899 -->|satisfiedBy| 8aec4f4d071ac12c;
  5a25cf6244f4f44["Hierarchical Matrix Format Test"];
  class 5a25cf6244f4f44 verification;
  click 5a25cf6244f4f44 "TreacibilityMatrix.md#hierarchical-matrix-format-test";
  8aec4f4d071ac12c["test.sh"];
  class 8aec4f4d071ac12c default;
  click 8aec4f4d071ac12c "../../tests/test-matrix-generation/test.sh";
  5a25cf6244f4f44 -->|satisfiedBy| 8aec4f4d071ac12c;
  50c290277850dd17["JSON Matrix Output Test"];
  class 50c290277850dd17 verification;
  click 50c290277850dd17 "TreacibilityMatrix.md#json-matrix-output-test";
  8aec4f4d071ac12c["test.sh"];
  class 8aec4f4d071ac12c default;
  click 8aec4f4d071ac12c "../../tests/test-matrix-generation/test.sh";
  50c290277850dd17 -->|satisfiedBy| 8aec4f4d071ac12c;
  b55d8517cd3e58["Traceability Matrix Builder Implementation"];
  class b55d8517cd3e58 requirement;
  click b55d8517cd3e58 "../SystemRequirements/Requirements.md#traceability-matrix-builder-implementation";
  16bf75b57622c10["matrix_generator.rs"];
  class 16bf75b57622c10 default;
  click 16bf75b57622c10 "../../core/src/matrix_generator.rs";
  b55d8517cd3e58 -->|satisfiedBy| 16bf75b57622c10;
  b55d8517cd3e58 -.->|verifiedBy| aa85c85e7c41d899;
  b55d8517cd3e58 -.->|verifiedBy| 5a25cf6244f4f44;
  7de9a55d6102af23["Export Traceability Matrix"];
  class 7de9a55d6102af23 requirement;
  click 7de9a55d6102af23 "../UserRequirements.md#export-traceability-matrix";
  7de9a55d6102af23 -.->|verifiedBy| 50c290277850dd17;
  6d32b919c82784b7["Include Verification Checkboxes"];
  class 6d32b919c82784b7 requirement;
  click 6d32b919c82784b7 "../UserRequirements.md#include-verification-checkboxes";
  6d32b919c82784b7 -.->|verifiedBy| aa85c85e7c41d899;
  ce77e5e4d9a4a0ca["CLI Matrix JSON Flag"];
  class ce77e5e4d9a4a0ca requirement;
  click ce77e5e4d9a4a0ca "../SystemRequirements/Requirements.md#cli-matrix-json-flag";
  16bf75b57622c10["matrix_generator.rs"];
  class 16bf75b57622c10 default;
  click 16bf75b57622c10 "../../core/src/matrix_generator.rs";
  ce77e5e4d9a4a0ca -->|satisfiedBy| 16bf75b57622c10;
  ce77e5e4d9a4a0ca -.->|verifiedBy| 50c290277850dd17;
  8b8c7d0ce4d237d3["CLI Matrix Command"];
  class 8b8c7d0ce4d237d3 requirement;
  click 8b8c7d0ce4d237d3 "../SystemRequirements/Requirements.md#cli-matrix-command";
  80defdd4cbc7ee18["cli.rs"];
  class 80defdd4cbc7ee18 default;
  click 80defdd4cbc7ee18 "../../cli/src/cli.rs";
  8b8c7d0ce4d237d3 -->|satisfiedBy| 80defdd4cbc7ee18;
  16bf75b57622c10["matrix_generator.rs"];
  class 16bf75b57622c10 default;
  click 16bf75b57622c10 "../../core/src/matrix_generator.rs";
  8b8c7d0ce4d237d3 -->|satisfiedBy| 16bf75b57622c10;
  8b8c7d0ce4d237d3 -.->|verifiedBy| aa85c85e7c41d899;
  8b8c7d0ce4d237d3 -.->|deriveReqT| ce77e5e4d9a4a0ca;
  62eb37827b2a642["CLI Matrix SVG Flag"];
  class 62eb37827b2a642 requirement;
  click 62eb37827b2a642 "../SystemRequirements/Requirements.md#cli-matrix-svg-flag";
  8b8c7d0ce4d237d3 -.->|deriveReqT| 62eb37827b2a642;
  34c75e4a88e1f381["CLI Help Structure Verification"];
  class 34c75e4a88e1f381 verification;
  click 34c75e4a88e1f381 "Misc.md#cli-help-structure-verification";
  8b8c7d0ce4d237d3 -.->|verifiedBy| 34c75e4a88e1f381;
  1b7491b67a792bc9["Markdown Matrix Formatter"];
  class 1b7491b67a792bc9 requirement;
  click 1b7491b67a792bc9 "../SystemRequirements/Requirements.md#markdown-matrix-formatter";
  16bf75b57622c10["matrix_generator.rs"];
  class 16bf75b57622c10 default;
  click 16bf75b57622c10 "../../core/src/matrix_generator.rs";
  1b7491b67a792bc9 -->|satisfiedBy| 16bf75b57622c10;
  1b7491b67a792bc9 -.->|verifiedBy| 50c290277850dd17;
  16bf75b57622c10["matrix_generator.rs"];
  class 16bf75b57622c10 default;
  click 16bf75b57622c10 "../../core/src/matrix_generator.rs";
  62eb37827b2a642 -->|satisfiedBy| 16bf75b57622c10;
  62eb37827b2a642 -.->|verifiedBy| 62b41611d85d4161;
```
### Traceability Matrix Generation Test

This test verifies that the system can generate a traceability matrix that accurately displays relationships between requirements and other elements.

#### Details

##### Acceptance Criteria
- System should generate a traceability matrix showing relationships between requirements and verification elements
- Matrix should organize requirements in a hierarchical structure
- Matrix should indicate verification status for each requirement
- Matrix should show relationships between requirements and verification elements

##### Test Criteria
- Command returns success (0) exit code
- Output contains a properly formatted matrix with requirements and verification elements
- Matrix includes hierarchy indicators for parent-child relationships
- Matrix includes verification status indicators (✅/❌)
- Matrix follows the specified format with proper table structure

#### Metadata
  * type: test-verification

#### Relations
  * verify: [Traceability Matrix Builder Implementation](../SystemRequirements/Requirements.md#traceability-matrix-builder-implementation)
  * verify: [Include Verification Checkboxes](../UserRequirements.md#include-verification-checkboxes)
  * satisfiedBy: [test.sh](../../tests/test-matrix-generation/test.sh)
---

### CLI Traces Flag Test

This test verifies that the system provides a command-line flag for generating traceability matrices.

#### Details

##### Acceptance Criteria
- System should provide a `--traces` flag for generating traceability matrices
- Command should execute without errors when the flag is used
- Output should be a properly formatted traceability matrix

##### Test Criteria
- Command with `--traces` flag returns success (0) exit code
- Command produces the expected traceability matrix output
- Help text includes documentation for the `--traces` flag

#### Metadata
  * type: test-verification

#### Relations
  * satisfiedBy: [test.sh](../../tests/test-matrix-generation/test.sh)
---

### SVG Matrix Output Test

This test verifies that the system can generate an SVG representation of the traceability matrix.

#### Details

##### Acceptance Criteria
- System should generate an SVG version of the traceability matrix when requested
- SVG should display full element names without truncation
- SVG should maintain hierarchical structure from the markdown matrix
- SVG should use appropriate visual indicators for verification status following the verification roll-up strategy
- Command should support both legacy `traces --svg` and new `traces --svg` formats

##### Test Criteria
- Command with `traces --svg` returns success (0) exit code
- Output is a valid SVG document
- Element names are displayed in full without truncation
- Hierarchical structure is preserved with visual indicators
- Verification status follows roll-up strategy:
  - Parent requirement with ALL children verified is marked as verified (✅)
  - Parent requirement with ANY child unverified is marked as unverified (❌)
  - Leaf requirement with direct verifiedBy relation is marked as verified (✅)
  - Leaf requirement without verifiedBy relation is marked as unverified (❌)

#### Metadata
  * type: test-verification

#### Relations
  * verify: [CLI Matrix SVG Flag](../SystemRequirements/Requirements.md#cli-matrix-svg-flag)
  * satisfiedBy: [test.sh](../../tests/test-matrix-generation/test.sh)
---

### Hierarchical Matrix Format Test

This test verifies that the traceability matrix properly represents the hierarchical relationships between requirements.

#### Details

##### Acceptance Criteria
- Matrix should organize requirements in a hierarchical structure
- Parent-child relationships should be visually indicated with indentation
- Requirements should be grouped by root requirements

##### Test Criteria
- Matrix output contains hierarchical organization
- Parent-child relationships are visually indicated with proper indentation
- Requirements are grouped by their root requirements

#### Metadata
  * type: test-verification

#### Relations
  * verify: [Traceability Matrix Builder Implementation](../SystemRequirements/Requirements.md#traceability-matrix-builder-implementation)
  * satisfiedBy: [test.sh](../../tests/test-matrix-generation/test.sh)
---

### JSON Matrix Output Test

This test verifies that the system can export the traceability matrix in a structured JSON format.

#### Details

##### Acceptance Criteria
- System should generate a JSON representation of the traceability matrix when requested
- JSON should include all information from the markdown matrix
- JSON should preserve hierarchical relationships
- JSON should use relative paths for element identifiers

##### Test Criteria
- Command with `--traces --json` flags returns success (0) exit code
- Output is valid JSON with required sections
- Hierarchical relationships are preserved in the JSON structure
- Element identifiers use relative paths

#### Metadata
  * type: test-verification

#### Relations
  * verify: [Markdown Matrix Formatter](../SystemRequirements/Requirements.md#markdown-matrix-formatter)
  * verify: [Export Traceability Matrix](../UserRequirements.md#export-traceability-matrix)
  * satisfiedBy: [test.sh](../../tests/test-matrix-generation/test.sh)
---