# Miscellaneous Verifications

This document contains miscellaneous verification tests that don't fit into the other verification categories.

## Export and Context Verifications
```mermaid
graph LR;
  %% REQVIRE-AUTOGENERATED-DIAGRAM
  %% Graph styling
  classDef userRequirement fill:#f9d6d6,stroke:#f55f5f,stroke-width:1px;
  classDef systemRequirement fill:#fce4e4,stroke:#e68a8a,stroke-width:1px;
  classDef verification fill:#d6f9d6,stroke:#5fd75f,stroke-width:1px;
  classDef default fill:#f5f5f5,stroke:#333333,stroke-width:1px;

  34c75e4a88e1f381["CLI Help Structure Verification"];
  class 34c75e4a88e1f381 verification;
  click 34c75e4a88e1f381 "Misc.md#cli-help-structure-verification";
  6fb925575a1602f1["test.sh"];
  class 6fb925575a1602f1 default;
  click 6fb925575a1602f1 "../../tests/test-cli-help-structure/test.sh";
  34c75e4a88e1f381 -->|satisfiedBy| 6fb925575a1602f1;
  1e055437d952f703["Lint Command Verification"];
  class 1e055437d952f703 verification;
  click 1e055437d952f703 "Misc.md#lint-command-verification";
  735766802775ec41["Format Command Requirements Verification"];
  class 735766802775ec41 verification;
  click 735766802775ec41 "Misc.md#format-command-requirements-verification";
  eaf33ce1e6113c8a["test.sh"];
  class eaf33ce1e6113c8a default;
  click eaf33ce1e6113c8a "../../tests/test-advanced-format/test.sh";
  735766802775ec41 -->|satisfiedBy| eaf33ce1e6113c8a;
  a5590d2dcfffe431["Serve Command Verification"];
  class a5590d2dcfffe431 verification;
  click a5590d2dcfffe431 "Misc.md#serve-command-verification";
  dd6732f292fab4eb["test.sh"];
  class dd6732f292fab4eb default;
  click dd6732f292fab4eb "../../tests/test-serve-command/test.sh";
  a5590d2dcfffe431 -->|satisfiedBy| dd6732f292fab4eb;
  14ef985b9a43174e["HTML Export Verification"];
  class 14ef985b9a43174e verification;
  click 14ef985b9a43174e "Misc.md#html-export-verification";
  8899a52ea9866d8b["test.sh"];
  class 8899a52ea9866d8b default;
  click 8899a52ea9866d8b "../../tests/test-html-export/test.sh";
  14ef985b9a43174e -->|satisfiedBy| 8899a52ea9866d8b;
  b49d890e0bbe0a83["Structure of Markdown Documents"];
  class b49d890e0bbe0a83 userRequirement;
  click b49d890e0bbe0a83 "../SpecificationsRequirements.md#structure-of-markdown-documents";
  9450d4313f47ef36["relation.rs"];
  class 9450d4313f47ef36 default;
  click 9450d4313f47ef36 "../../core/src/relation.rs";
  b49d890e0bbe0a83 -->|satisfiedBy| 9450d4313f47ef36;
  a814c4935e1a0449["element.rs"];
  class a814c4935e1a0449 default;
  click a814c4935e1a0449 "../../core/src/element.rs";
  b49d890e0bbe0a83 -->|satisfiedBy| a814c4935e1a0449;
  398003c91b6b2cde["subsection.rs"];
  class 398003c91b6b2cde default;
  click 398003c91b6b2cde "../../core/src/subsection.rs";
  b49d890e0bbe0a83 -->|satisfiedBy| 398003c91b6b2cde;
  f22d93285fcd7664["parser.rs"];
  class f22d93285fcd7664 default;
  click f22d93285fcd7664 "../../core/src/parser.rs";
  b49d890e0bbe0a83 -->|satisfiedBy| f22d93285fcd7664;
  d50a859650933e55["model.rs"];
  class d50a859650933e55 default;
  click d50a859650933e55 "../../core/src/model.rs";
  b49d890e0bbe0a83 -->|satisfiedBy| d50a859650933e55;
  b49d890e0bbe0a83 -.->|verifiedBy| 735766802775ec41;
  b0d0999636b025fa["Invalid Header Structure Test"];
  class b0d0999636b025fa verification;
  click b0d0999636b025fa "ValidationTests.md#invalid-header-structure-test";
  b49d890e0bbe0a83 -.->|verifiedBy| b0d0999636b025fa;
  b50359102e04bf09["CLI Sections Summary Command"];
  class b50359102e04bf09 systemRequirement;
  click b50359102e04bf09 "../SystemRequirements/Requirements.md#cli-sections-summary-command";
  80defdd4cbc7ee18["cli.rs"];
  class 80defdd4cbc7ee18 default;
  click 80defdd4cbc7ee18 "../../cli/src/cli.rs";
  b50359102e04bf09 -->|satisfiedBy| 80defdd4cbc7ee18;
  994f165ff784760d["sections_summary.rs"];
  class 994f165ff784760d default;
  click 994f165ff784760d "../../core/src/sections_summary.rs";
  b50359102e04bf09 -->|satisfiedBy| 994f165ff784760d;
  9bf743e946ad83ea["Sections Summary Tests"];
  class 9bf743e946ad83ea verification;
  click 9bf743e946ad83ea "ReportsTests.md#sections-summary-tests";
  b50359102e04bf09 -.->|verifiedBy| 9bf743e946ad83ea;
  b50359102e04bf09 -.->|verifiedBy| 34c75e4a88e1f381;
  5deb63503bdf77c["HTML Export"];
  class 5deb63503bdf77c systemRequirement;
  click 5deb63503bdf77c "../SystemRequirements/Requirements.md#html-export";
  c3d63c5d4133e346["html_export.rs"];
  class c3d63c5d4133e346 default;
  click c3d63c5d4133e346 "../../core/src/html_export.rs";
  5deb63503bdf77c -->|satisfiedBy| c3d63c5d4133e346;
  d0e6cc47b904faa5["html.rs"];
  class d0e6cc47b904faa5 default;
  click d0e6cc47b904faa5 "../../core/src/html.rs";
  5deb63503bdf77c -->|satisfiedBy| d0e6cc47b904faa5;
  80defdd4cbc7ee18["cli.rs"];
  class 80defdd4cbc7ee18 default;
  click 80defdd4cbc7ee18 "../../cli/src/cli.rs";
  5deb63503bdf77c -->|satisfiedBy| 80defdd4cbc7ee18;
  5deb63503bdf77c -.->|verifiedBy| 34c75e4a88e1f381;
  5ffd0c57f51e3b22["Export Related System Elements"];
  class 5ffd0c57f51e3b22 systemRequirement;
  click 5ffd0c57f51e3b22 "../SystemRequirements/Requirements.md#export-related-system-elements";
  5deb63503bdf77c -.->|deriveReqT| 5ffd0c57f51e3b22;
  1e20313bdf4c143c["Model Diagram SVG Generation"];
  class 1e20313bdf4c143c systemRequirement;
  click 1e20313bdf4c143c "../SystemRequirements/Requirements.md#model-diagram-svg-generation";
  5deb63503bdf77c -.->|deriveReqT| 1e20313bdf4c143c;
  a21995894299effb["Index Generation"];
  class a21995894299effb systemRequirement;
  click a21995894299effb "../SystemRequirements/Requirements.md#index-generation";
  5deb63503bdf77c -.->|deriveReqT| a21995894299effb;
  52fe8f19c3102ecf["Serve Command"];
  class 52fe8f19c3102ecf systemRequirement;
  click 52fe8f19c3102ecf "../SystemRequirements/Requirements.md#serve-command";
  5deb63503bdf77c -.->|deriveReqT| 52fe8f19c3102ecf;
  2c4fbf015f452a3e["Model HTML Pages Design"];
  class 2c4fbf015f452a3e systemRequirement;
  click 2c4fbf015f452a3e "../SystemRequirements/Requirements.md#model-html-pages-design";
  5deb63503bdf77c -.->|deriveReqT| 2c4fbf015f452a3e;
  c5dd3734ff11b459["Inconsistent Newlines Format Implementation"];
  class c5dd3734ff11b459 systemRequirement;
  click c5dd3734ff11b459 "../SystemRequirements/Requirements.md#inconsistent-newlines-format-implementation";
  8fbf4ca0471377ea["format.rs"];
  class 8fbf4ca0471377ea default;
  click 8fbf4ca0471377ea "../../core/src/format.rs";
  c5dd3734ff11b459 -->|satisfiedBy| 8fbf4ca0471377ea;
  c5dd3734ff11b459 -.->|verifiedBy| 735766802775ec41;
  b4f1757fc8831083["Validate Command"];
  class b4f1757fc8831083 systemRequirement;
  click b4f1757fc8831083 "../SystemRequirements/Requirements.md#validate-command";
  80defdd4cbc7ee18["cli.rs"];
  class 80defdd4cbc7ee18 default;
  click 80defdd4cbc7ee18 "../../cli/src/cli.rs";
  b4f1757fc8831083 -->|satisfiedBy| 80defdd4cbc7ee18;
  e37dc7f46d75d46["Invalid Relations Test"];
  class e37dc7f46d75d46 verification;
  click e37dc7f46d75d46 "ValidationTests.md#invalid-relations-test";
  b4f1757fc8831083 -.->|verifiedBy| e37dc7f46d75d46;
  b4f1757fc8831083 -.->|verifiedBy| 34c75e4a88e1f381;
  875f89a9f301fb90["Format Command"];
  class 875f89a9f301fb90 systemRequirement;
  click 875f89a9f301fb90 "../SystemRequirements/Requirements.md#format-command";
  80defdd4cbc7ee18["cli.rs"];
  class 80defdd4cbc7ee18 default;
  click 80defdd4cbc7ee18 "../../cli/src/cli.rs";
  875f89a9f301fb90 -->|satisfiedBy| 80defdd4cbc7ee18;
  875f89a9f301fb90 -.->|verifiedBy| 34c75e4a88e1f381;
  875f89a9f301fb90 -.->|verifiedBy| 735766802775ec41;
  2ace056c2ac70d6c["Missing Separators Format Implementation"];
  class 2ace056c2ac70d6c systemRequirement;
  click 2ace056c2ac70d6c "../SystemRequirements/Requirements.md#missing-separators-format-implementation";
  8fbf4ca0471377ea["format.rs"];
  class 8fbf4ca0471377ea default;
  click 8fbf4ca0471377ea "../../core/src/format.rs";
  2ace056c2ac70d6c -->|satisfiedBy| 8fbf4ca0471377ea;
  2ace056c2ac70d6c -.->|verifiedBy| 735766802775ec41;
  32d4081d21fe7b86["Safe Redundant Hierarchical Relations Auto-Removal"];
  class 32d4081d21fe7b86 systemRequirement;
  click 32d4081d21fe7b86 "../SystemRequirements/Requirements.md#safe-redundant-hierarchical-relations-auto-removal";
  a9b6f3acdf104ea5["lint.rs"];
  class a9b6f3acdf104ea5 default;
  click a9b6f3acdf104ea5 "../../core/src/lint.rs";
  32d4081d21fe7b86 -->|satisfiedBy| a9b6f3acdf104ea5;
  32d4081d21fe7b86 -.->|verifiedBy| 1e055437d952f703;
  749eaee85cfd0a43["CLI Remove Diagrams Flag"];
  class 749eaee85cfd0a43 systemRequirement;
  click 749eaee85cfd0a43 "../SystemRequirements/Requirements.md#cli-remove-diagrams-flag";
  80defdd4cbc7ee18["cli.rs"];
  class 80defdd4cbc7ee18 default;
  click 80defdd4cbc7ee18 "../../cli/src/cli.rs";
  749eaee85cfd0a43 -->|satisfiedBy| 80defdd4cbc7ee18;
  6a6973ecb2f20ee3["Remove Generated Diagrams Verification"];
  class 6a6973ecb2f20ee3 verification;
  click 6a6973ecb2f20ee3 "DiagramsTests.md#remove-generated-diagrams-verification";
  749eaee85cfd0a43 -.->|verifiedBy| 6a6973ecb2f20ee3;
  749eaee85cfd0a43 -.->|verifiedBy| 34c75e4a88e1f381;
  837782fd5fe407a0["Document Structure Normalization"];
  class 837782fd5fe407a0 systemRequirement;
  click 837782fd5fe407a0 "../SystemRequirements/Requirements.md#document-structure-normalization";
  b7c871ab64a7059a["graph_registry.rs"];
  class b7c871ab64a7059a default;
  click b7c871ab64a7059a "../../core/src/graph_registry.rs";
  837782fd5fe407a0 -->|satisfiedBy| b7c871ab64a7059a;
  f22d93285fcd7664["parser.rs"];
  class f22d93285fcd7664 default;
  click f22d93285fcd7664 "../../core/src/parser.rs";
  837782fd5fe407a0 -->|satisfiedBy| f22d93285fcd7664;
  837782fd5fe407a0 -.->|verifiedBy| 735766802775ec41;
  8b8c7d0ce4d237d3["CLI Matrix Command"];
  class 8b8c7d0ce4d237d3 systemRequirement;
  click 8b8c7d0ce4d237d3 "../SystemRequirements/Requirements.md#cli-matrix-command";
  80defdd4cbc7ee18["cli.rs"];
  class 80defdd4cbc7ee18 default;
  click 80defdd4cbc7ee18 "../../cli/src/cli.rs";
  8b8c7d0ce4d237d3 -->|satisfiedBy| 80defdd4cbc7ee18;
  16bf75b57622c10["matrix_generator.rs"];
  class 16bf75b57622c10 default;
  click 16bf75b57622c10 "../../core/src/matrix_generator.rs";
  8b8c7d0ce4d237d3 -->|satisfiedBy| 16bf75b57622c10;
  aa85c85e7c41d899["Traceability Matrix Generation Test"];
  class aa85c85e7c41d899 verification;
  click aa85c85e7c41d899 "TreacibilityMatrix.md#traceability-matrix-generation-test";
  8b8c7d0ce4d237d3 -.->|verifiedBy| aa85c85e7c41d899;
  8b8c7d0ce4d237d3 -.->|verifiedBy| 34c75e4a88e1f381;
  ce77e5e4d9a4a0ca["CLI Matrix JSON Flag"];
  class ce77e5e4d9a4a0ca systemRequirement;
  click ce77e5e4d9a4a0ca "../SystemRequirements/Requirements.md#cli-matrix-json-flag";
  8b8c7d0ce4d237d3 -.->|deriveReqT| ce77e5e4d9a4a0ca;
  62eb37827b2a642["CLI Matrix SVG Flag"];
  class 62eb37827b2a642 systemRequirement;
  click 62eb37827b2a642 "../SystemRequirements/Requirements.md#cli-matrix-svg-flag";
  8b8c7d0ce4d237d3 -.->|deriveReqT| 62eb37827b2a642;
  4c9ae0a2fb751ce6["CLI Change Impact Report Command"];
  class 4c9ae0a2fb751ce6 systemRequirement;
  click 4c9ae0a2fb751ce6 "../SystemRequirements/Requirements.md#cli-change-impact-report-command";
  80defdd4cbc7ee18["cli.rs"];
  class 80defdd4cbc7ee18 default;
  click 80defdd4cbc7ee18 "../../cli/src/cli.rs";
  4c9ae0a2fb751ce6 -->|satisfiedBy| 80defdd4cbc7ee18;
  6c40e66699ba40dd["CLI Git Commit Hash Flag"];
  class 6c40e66699ba40dd systemRequirement;
  click 6c40e66699ba40dd "../SystemRequirements/Requirements.md#cli-git-commit-hash-flag";
  4c9ae0a2fb751ce6 -.->|deriveReqT| 6c40e66699ba40dd;
  4c9ae0a2fb751ce6 -.->|verifiedBy| 34c75e4a88e1f381;
  37a75398bd174177["Change Impact Command Line Interface"];
  class 37a75398bd174177 systemRequirement;
  click 37a75398bd174177 "../SystemRequirements/ChangeImpactPropagation.md#change-impact-command-line-interface";
  4c9ae0a2fb751ce6 -.->|deriveReqT| 37a75398bd174177;
  5bfc0d5fd7bba25["CLI Traces Command"];
  class 5bfc0d5fd7bba25 systemRequirement;
  click 5bfc0d5fd7bba25 "../SystemRequirements/Requirements.md#cli-traces-command";
  80defdd4cbc7ee18["cli.rs"];
  class 80defdd4cbc7ee18 default;
  click 80defdd4cbc7ee18 "../../cli/src/cli.rs";
  5bfc0d5fd7bba25 -->|satisfiedBy| 80defdd4cbc7ee18;
  5bfc0d5fd7bba25 -.->|verifiedBy| 34c75e4a88e1f381;
  920a8118d579854b["CLI Traces Filter Options"];
  class 920a8118d579854b systemRequirement;
  click 920a8118d579854b "../SystemRequirements/Requirements.md#cli-traces-filter-options";
  5bfc0d5fd7bba25 -.->|deriveReqT| 920a8118d579854b;
  ddec547537f501ee["CLI Traces From-Folder Option"];
  class ddec547537f501ee systemRequirement;
  click ddec547537f501ee "../SystemRequirements/Requirements.md#cli-traces-from-folder-option";
  5bfc0d5fd7bba25 -.->|deriveReqT| ddec547537f501ee;
  ca4c172fa1865ab5["Lint Auto-fix Capability"];
  class ca4c172fa1865ab5 systemRequirement;
  click ca4c172fa1865ab5 "../SystemRequirements/Requirements.md#lint-auto-fix-capability";
  ca4c172fa1865ab5 -.->|verifiedBy| 1e055437d952f703;
  8d93a79de428970["CLI Coverage Command"];
  class 8d93a79de428970 systemRequirement;
  click 8d93a79de428970 "../SystemRequirements/Requirements.md#cli-coverage-command";
  80defdd4cbc7ee18["cli.rs"];
  class 80defdd4cbc7ee18 default;
  click 80defdd4cbc7ee18 "../../cli/src/cli.rs";
  8d93a79de428970 -->|satisfiedBy| 80defdd4cbc7ee18;
  349f5e874cf22d98["Verification Coverage Report Test"];
  class 349f5e874cf22d98 verification;
  click 349f5e874cf22d98 "ReportsTests.md#verification-coverage-report-test";
  8d93a79de428970 -.->|verifiedBy| 349f5e874cf22d98;
  8d93a79de428970 -.->|verifiedBy| 34c75e4a88e1f381;
  c81cb4aa001db458["Lint Output Formatting"];
  class c81cb4aa001db458 systemRequirement;
  click c81cb4aa001db458 "../SystemRequirements/Requirements.md#lint-output-formatting";
  c81cb4aa001db458 -.->|verifiedBy| 1e055437d952f703;
  8dfe33c28555e80a["Replace Absolute Links with Relative Links"];
  class 8dfe33c28555e80a userRequirement;
  click 8dfe33c28555e80a "../UserRequirements.md#replace-absolute-links-with-relative-links";
  8dfe33c28555e80a -.->|verifiedBy| 735766802775ec41;
  c1851df0c89e80f8["HTML Navigation Enhancement"];
  class c1851df0c89e80f8 systemRequirement;
  click c1851df0c89e80f8 "../SystemRequirements/Requirements.md#html-navigation-enhancement";
  d0e6cc47b904faa5["html.rs"];
  class d0e6cc47b904faa5 default;
  click d0e6cc47b904faa5 "../../core/src/html.rs";
  c1851df0c89e80f8 -->|satisfiedBy| d0e6cc47b904faa5;
  c3d63c5d4133e346["html_export.rs"];
  class c3d63c5d4133e346 default;
  click c3d63c5d4133e346 "../../core/src/html_export.rs";
  c1851df0c89e80f8 -->|satisfiedBy| c3d63c5d4133e346;
  c1851df0c89e80f8 -.->|verifiedBy| 14ef985b9a43174e;
  aee526ff800e2525["Excess Whitespace Format Implementation"];
  class aee526ff800e2525 systemRequirement;
  click aee526ff800e2525 "../SystemRequirements/Requirements.md#excess-whitespace-format-implementation";
  8fbf4ca0471377ea["format.rs"];
  class 8fbf4ca0471377ea default;
  click 8fbf4ca0471377ea "../../core/src/format.rs";
  aee526ff800e2525 -->|satisfiedBy| 8fbf4ca0471377ea;
  aee526ff800e2525 -.->|verifiedBy| 735766802775ec41;
  11859a2b890dd8c3["Redundant Verify Relations Detection"];
  class 11859a2b890dd8c3 systemRequirement;
  click 11859a2b890dd8c3 "../SystemRequirements/Requirements.md#redundant-verify-relations-detection";
  11859a2b890dd8c3 -.->|verifiedBy| 1e055437d952f703;
  7223dec8fe51900f["CLI Generate Diagrams Flag"];
  class 7223dec8fe51900f systemRequirement;
  click 7223dec8fe51900f "../SystemRequirements/Requirements.md#cli-generate-diagrams-flag";
  80defdd4cbc7ee18["cli.rs"];
  class 80defdd4cbc7ee18 default;
  click 80defdd4cbc7ee18 "../../cli/src/cli.rs";
  7223dec8fe51900f -->|satisfiedBy| 80defdd4cbc7ee18;
  2d2cf67bb8070da8["Diagram Generation Test"];
  class 2d2cf67bb8070da8 verification;
  click 2d2cf67bb8070da8 "DiagramsTests.md#diagram-generation-test";
  7223dec8fe51900f -.->|verifiedBy| 2d2cf67bb8070da8;
  7223dec8fe51900f -.->|verifiedBy| 34c75e4a88e1f381;
  9c7292a4b6970e22["Reserved Subsections Format Implementation"];
  class 9c7292a4b6970e22 systemRequirement;
  click 9c7292a4b6970e22 "../SystemRequirements/Requirements.md#reserved-subsections-format-implementation";
  8fbf4ca0471377ea["format.rs"];
  class 8fbf4ca0471377ea default;
  click 8fbf4ca0471377ea "../../core/src/format.rs";
  9c7292a4b6970e22 -->|satisfiedBy| 8fbf4ca0471377ea;
  9c7292a4b6970e22 -.->|verifiedBy| 735766802775ec41;
  1a173441705701a0["index_generator.rs"];
  class 1a173441705701a0 default;
  click 1a173441705701a0 "../../core/src/index_generator.rs";
  a21995894299effb -->|satisfiedBy| 1a173441705701a0;
  c3d63c5d4133e346["html_export.rs"];
  class c3d63c5d4133e346 default;
  click c3d63c5d4133e346 "../../core/src/html_export.rs";
  a21995894299effb -->|satisfiedBy| c3d63c5d4133e346;
  a21995894299effb -.->|verifiedBy| 14ef985b9a43174e;
  52fe8f19c3102ecf -.->|trace| b4f1757fc8831083;
  80defdd4cbc7ee18["cli.rs"];
  class 80defdd4cbc7ee18 default;
  click 80defdd4cbc7ee18 "../../cli/src/cli.rs";
  52fe8f19c3102ecf -->|satisfiedBy| 80defdd4cbc7ee18;
  e313808f7a755f6["serve.rs"];
  class e313808f7a755f6 default;
  click e313808f7a755f6 "../../cli/src/serve.rs";
  52fe8f19c3102ecf -->|satisfiedBy| e313808f7a755f6;
  52fe8f19c3102ecf -.->|verifiedBy| a5590d2dcfffe431;
  dd743af9792366e["Git-Style Diff Output for Format"];
  class dd743af9792366e systemRequirement;
  click dd743af9792366e "../SystemRequirements/Requirements.md#git-style-diff-output-for-format";
  8fbf4ca0471377ea["format.rs"];
  class 8fbf4ca0471377ea default;
  click 8fbf4ca0471377ea "../../core/src/format.rs";
  dd743af9792366e -->|satisfiedBy| 8fbf4ca0471377ea;
  dd743af9792366e -.->|verifiedBy| 735766802775ec41;
```
### HTML Export Verification

This test verifies that the system exports specifications into HTML format with generated index and saves them in the designated output location.

#### Details

##### Acceptance Criteria:
- System should export specifications to HTML format
- HTML files should be saved in the designated output location
- HTML output should maintain the structure and content of the original specifications
- System shall generate index.md in the temporary working directory during HTML export
- index.md shall be converted to index.html in the output directory
- index.html shall contain links to all specification documents
- index.html shall be properly structured with sections
- index.html shall include brief summaries of each document
- index.html shall serve as the primary entry point for HTML documentation
- Links in diagrams and text must be converted to use .html instead of .md
- Paths in HTML files should maintain the original relative structure
- System should work in environments without Git repositories

##### Test Criteria:
- Command exits with success (0) return code
- HTML files are generated at the expected location with .html extension
- Output directory contains index.html file
- index.html contains links to all specification documents
- index.html structure follows expected format
- HTML content preserves the structure and information from the source files
- Links in HTML files use .html extension instead of .md
- Mermaid click links are properly converted from .md to .html
- Both GitHub-style URLs and direct file paths in mermaid click links are handled correctly
- Paths should not have duplicated folder names (e.g., specifications/specifications)

#### Metadata
  * type: test-verification

#### Relations
  * verify: [Index Generation](../SystemRequirements/Requirements.md#index-generation)
  * satisfiedBy: [test.sh](../../tests/test-html-export/test.sh)
---

### CLI Help Structure Verification

This test verifies that the CLI help output displays all commands and their options flattened in the main help, and that all CLI command requirements are covered.

#### Details

##### Acceptance Criteria
- Running `reqvire` (without arguments) displays the main help output as the default command
- Main help output shows Usage line: `reqvire [OPTIONS] <COMMAND> [COMMAND OPTIONS]`
- Main help lists all available commands under "Commands:" section
- Main help lists all global options under "Options:" section
- Command-specific options are displayed under dedicated headings (e.g., "SUMMARY OPTIONS:", "FORMAT OPTIONS:")
- All command options are flattened and visible in the main help without needing to drill down
- Help output includes nested subcommands expanded (e.g., "matrix", "traces", "coverage")
- Each command's help text is descriptive and clear

##### Test Criteria
1. **Main help output structure**
   Command: `reqvire`
   - exits code **0**
   - output contains "Usage: reqvire [OPTIONS] <COMMAND> [COMMAND OPTIONS]"
   - output contains "Commands:" section
   - output contains "Options:" section with `-h, --help`, `-V, --version`

2. **Command listing completeness**
   - All CLI commands are listed: html, format, validate, generate-diagrams, remove-diagrams, summary, section-summary, change-impact, verifications
   - Nested commands are expanded: "matrix", "traces", "coverage"

3. **Options flattening - all command-specific option sections present**
   - FORMAT OPTIONS section visible
   - SUMMARY OPTIONS section visible
   - SECTION-SUMMARY OPTIONS section visible
   - CHANGE IMPACT OPTIONS section visible
   - VERIFICATIONS MATRIX OPTIONS section visible
   - VERIFICATIONS TRACES OPTIONS section visible
   - VERIFICATIONS COVERAGE OPTIONS section visible

4. **Help text quality**
   - Each command has descriptive help text
   - Options have clear descriptions

#### Metadata
  * type: test-verification

#### Relations
  * verify: [Format Command](../SystemRequirements/Requirements.md#format-command)
  * verify: [Validate Command](../SystemRequirements/Requirements.md#validate-command)
  * verify: [HTML Export](../SystemRequirements/Requirements.md#html-export)
  * verify: [CLI Generate Diagrams Flag](../SystemRequirements/Requirements.md#cli-generate-diagrams-flag)
  * verify: [CLI Remove Diagrams Flag](../SystemRequirements/Requirements.md#cli-remove-diagrams-flag)
  * verify: [CLI Sections Summary Command](../SystemRequirements/Requirements.md#cli-sections-summary-command)
  * verify: [CLI Change Impact Report Command](../SystemRequirements/Requirements.md#cli-change-impact-report-command)
  * verify: [CLI Matrix Command](../SystemRequirements/Requirements.md#cli-matrix-command)
  * verify: [CLI Traces Command](../SystemRequirements/Requirements.md#cli-traces-command)
  * verify: [CLI Coverage Command](../SystemRequirements/Requirements.md#cli-coverage-command)
  * satisfiedBy: [test.sh](../../tests/test-cli-help-structure/test.sh)
---

### Format Command Requirements Verification

This test verifies the format command requirements from SystemRequirements and UserRequirements, focusing on normalizing and standardizing MBSE models for consistency and readability.

#### Details

##### Acceptance Criteria
**Format Command Functionality:**
- System shall provide format command that normalizes and standardizes markdown documents
- System shall default to dry-run mode (preview changes without applying them)
- System shall require --fix flag to actually apply formatting changes to files
- System shall display changes in git diff style with line numbers and colors
- System shall show diff output in both preview mode and when applying changes with --fix
- System shall support --json flag for structured output of formatting results
- System shall preserve all document content while improving formatting consistency

**Content Preservation:**
- System shall preserve personas sections and other non-element content
- System shall maintain element ordering within sections
- System shall preserve section ordering throughout documents
- System shall preserve page content (frontmatter before first section)
- System shall preserve section content (content between section headers and first element)

**Formatting Consistency:**
- System shall trim excess whitespace from lines
- System shall normalize line endings consistently
- System shall insert proper separators between elements
- System shall normalize consecutive separators to single separators
- System shall normalize relation indentation to proper 2-space format
- System shall format relation links with human-readable names
- System shall clean up file references to show filename only for implementation files

**Document Structure Normalization:**
- System shall add level 1 page header (based on filename) when document lacks page header
- System shall add `## Requirements` section header when elements exist without section header
- System shall preserve existing page headers (starting with `# `)
- System shall preserve existing section headers (starting with `## `)
- System shall correctly distinguish level 1 headers from level 2+ headers

**Change Preview Quality:**
- System shall show file identification clearly in change output
- System shall display line references with consistent width based on maximum line number

**Known Limitations:**
- Diff output may not correctly display blank line additions in all cases (blank lines shown with ‚ê§ character may have incorrect line numbering or positioning)
- System shall visualize trailing whitespace removal with special characters
- System shall use colors to distinguish additions (green) and removals (red)
- System shall group changes by file with clear separators
- System shall only show lines that have changes, omitting unchanged content
- System shall provide context lines before and after changes for better readability
- System shall maintain sequential line numbering that reflects final file positions
- System shall ensure line number continuity throughout diff output

**Relation Link Enhancement:**
- System shall convert simple identifiers (non-markdown format) to proper markdown link format
- System shall convert absolute links to relative links where appropriate
- System shall preserve already correct relative links without modification
- System shall replace fragment-only same-file references with full element names
- System shall convert implementation file paths to clean filename references
- System shall preserve external URLs without modification

##### Test Criteria
1. **Basic format functionality**
   - Format command runs successfully on test markdown files
   - Default mode (no --fix flag) shows preview without making changes
   - --fix flag applies changes correctly
   - Format command shows diff output in both preview and --fix modes
   - JSON flag produces structured output with formatting results

2. **Content preservation verification**
   - Personas sections remain intact after formatting
   - Element content and structure preserved
   - Section ordering maintained correctly
   - Page and section content preserved

3. **Change detection and preview**
   - Changes are clearly identified by file
   - Line references include consistent number width
   - Trailing whitespace removal is visualized
   - Color coding distinguishes addition/removal changes
   - Context lines provide readable context around changes
   - Line numbering maintains sequential continuity reflecting final file positions

4. **Relation link quality**
   - Simple identifiers are converted to proper markdown link format
   - Absolute links are converted to relative links where appropriate
   - Already correct relative links remain unchanged
   - Same-file references use human-readable element names
   - Implementation file references show clean filenames
   - Fragment references use proper notation

5. **Formatting consistency**
   - Excess whitespace is trimmed appropriately
   - Separators are inserted correctly between elements
   - Consecutive separators are normalized to single separators
   - Relation indentation is normalized to proper 2-space format
   - Line endings are normalized

6. **Line numbering accuracy**
   - Line numbers in diff output are sequential and consistent
   - Context lines maintain proper numbering continuity
   - Added lines show correct position in final file
   - Line numbering reflects final file structure accurately

#### Metadata
  * type: test-verification

#### Relations
  * verify: [Format Command](../SystemRequirements/Requirements.md#format-command)
  * verify: [Document Structure Normalization](../SystemRequirements/Requirements.md#document-structure-normalization)
  * verify: [Structure of Markdown Documents](../SpecificationsRequirements.md#structure-of-markdown-documents)
  * satisfiedBy: [test.sh](../../tests/test-advanced-format/test.sh)
---

### Serve Command Verification

This test verifies that the serve command exports HTML to a temporary directory and starts an HTTP server that serves the model documentation.

#### Details

##### Acceptance Criteria:
- System shall export HTML artifacts to a temporary directory
- System shall start HTTP server on specified host and port
- System shall display clickable terminal link to the server URL
- System shall serve index.html when accessing root URL
- System shall serve all exported HTML files with correct paths
- System shall serve static assets (SVG diagrams, CSS, etc.)
- System shall return 404 for non-existent files
- System shall set correct Content-Type headers for different file types
- System shall run in quiet mode (suppress verbose export output)
- System shall not automatically open browser window
- System shall display instructions for Ctrl-C stop

##### Test Criteria:
- Command starts successfully and displays server URL with instructions
- Server responds to HTTP requests on specified port
- Root URL (/) serves index.html
- HTML files are served with text/html content type
- SVG files are served with image/svg+xml content type
- Non-existent paths return 404 status
- Export verbose output is suppressed (quiet mode active)

#### Metadata
  * type: test-verification

#### Relations
  * verify: [Serve Command](../SystemRequirements/Requirements.md#serve-command)
  * satisfiedBy: [test.sh](../../tests/test-serve-command/test.sh)
---

### Lint Command Verification

This test verifies that the lint command analyzes model quality, detects issues in requirements relations, and provides categorized output distinguishing between auto-fixable issues and those requiring manual review.

#### Details

##### Acceptance Criteria:
**Basic Command Functionality:**
- System shall provide lint command that analyzes model quality
- System shall default to dry-run mode (report issues without applying fixes)
- System shall support --fixable flag to show only auto-fixable issues
- System shall support --auditable flag to show only issues requiring manual review
- System shall support --fix flag to automatically apply fixes for auto-fixable issues
- System shall support --json flag for structured JSON output
- System shall show ALL issues when no filter flags are provided
- System shall exit with code 0 when no issues are found or fixes are successfully applied
- System shall exit with non-zero code on errors

**Redundant Verify Relations Detection:**
- System shall detect when a verification verifies both a leaf requirement and its ancestor
- System shall reuse verification trace tree logic for detection
- System shall report these as auto-fixable issues
- System shall show affected verification elements with file paths
- System shall list specific redundant verify relations
- System shall explain why relations are redundant

**Maybe-Redundant Hierarchical Relations Detection:**
- System shall detect when an element has derivedFrom to both a requirement and its ancestor
- System shall use virtual verification connected to all leaf requirements for detection
- System shall reuse trace tree building logic for consistency
- System shall report these as needs manual review issues
- System shall show affected elements with their derivedFrom relations
- System shall not suggest which relations to remove

**Output Formatting:**
- System shall categorize output into "Auto-fixable Issues" and "Needs Manual Review" sections
- Each issue shall include element identifier, file path, specific relations, and rationale
- JSON output shall include issue categorization, type, affected elements, relation details, and rationale
- System shall not suggest what to remove in output

**Auto-fix Capability:**
- System shall apply fixes only for auto-fixable issues when --fix is used
- System shall remove redundant verify relations from verification elements
- System shall remove safe redundant hierarchical derivation relations following single-chain constraint
- System shall NOT auto-remove hierarchical relations with multiple converging paths (requires manual review)
- System shall preserve all other content and formatting in files
- System shall report all changes made (files modified, relations removed)
- System shall not modify issues categorized as needs manual review

##### Test Criteria:
1. **Command execution**
   - Lint command runs successfully with default behavior
   - --fixable flag shows only auto-fixable issues
   - --auditable flag shows only manual review issues
   - --fix flag applies fixes for auto-fixable issues
   - --json flag produces structured JSON output

2. **Redundant verify detection**
   - Correctly identifies redundant verify relations using trace tree logic
   - Reports verification elements with redundant relations
   - Categorizes as auto-fixable

3. **Hierarchical redundancy detection**
   - Creates virtual verification connected to leaf requirements
   - Correctly identifies potentially redundant derivedFrom relations
   - Categorizes as needs manual review

4. **Output quality**
   - Clear categorization into auto-fixable and manual review sections
   - Complete information for each issue
   - JSON output has correct structure
   - No suggestions on what to remove

5. **Auto-fix functionality**
   - Removes redundant verify relations from markdown files
   - Removes safe redundant hierarchical derivation relations (single-chain only)
   - Does NOT auto-remove hierarchical relations with multiple converging paths
   - Preserves file content and formatting
   - Reports changes accurately
   - Does not modify manual review issues

#### Metadata
  * type: test-verification

#### Relations
  * verify: [Redundant Verify Relations Detection](../SystemRequirements/Requirements.md#redundant-verify-relations-detection)
  * verify: [Safe Redundant Hierarchical Relations Auto-Removal](../SystemRequirements/Requirements.md#safe-redundant-hierarchical-relations-auto-removal)
  * verify: [Lint Output Formatting](../SystemRequirements/Requirements.md#lint-output-formatting)
  * verify: [Lint Auto-fix Capability](../SystemRequirements/Requirements.md#lint-auto-fix-capability)
---