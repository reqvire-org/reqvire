# Configuration

## File Exclusion Configuration
```mermaid
graph LR;
  %% REQVIRE-AUTOGENERATED-DIAGRAM
  %% Graph styling
  classDef userRequirement fill:#f9d6d6,stroke:#f55f5f,stroke-width:1px;
  classDef systemRequirement fill:#fce4e4,stroke:#e68a8a,stroke-width:1px;
  classDef verification fill:#d6f9d6,stroke:#5fd75f,stroke-width:1px;
  classDef default fill:#f5f5f5,stroke:#333333,stroke-width:1px;

  1fbfcaddda85a6c2["Ignoring Unstructured Documents"];
  class 1fbfcaddda85a6c2 systemRequirement;
  click 1fbfcaddda85a6c2 "Configuration.md#ignoring-unstructured-documents";
  8419dcc77d92b609["config.rs"];
  class 8419dcc77d92b609 default;
  click 8419dcc77d92b609 "../../../cli/src/config.rs";
  1fbfcaddda85a6c2 -->|satisfiedBy| 8419dcc77d92b609;
  dd454dd5831a33a0["File Pattern Exclusion for Format"];
  class dd454dd5831a33a0 systemRequirement;
  click dd454dd5831a33a0 "../ValidationAndReporting/Formatting.md#file-pattern-exclusion-for-format";
  1fbfcaddda85a6c2 -.->|deriveReqT| dd454dd5831a33a0;
  45f9231a94c04f4e["Requirements Processing"];
  class 45f9231a94c04f4e systemRequirement;
  click 45f9231a94c04f4e "Configuration.md#requirements-processing";
  1fbfcaddda85a6c2 -.->|deriveReqT| 45f9231a94c04f4e;
  3ff9961dd21bf22e["Reserved Repository Files Exclusion"];
  class 3ff9961dd21bf22e systemRequirement;
  click 3ff9961dd21bf22e "Configuration.md#reserved-repository-files-exclusion";
  1fbfcaddda85a6c2 -.->|deriveReqT| 3ff9961dd21bf22e;
  767f898924bcaf15["Ignore Files Integration"];
  class 767f898924bcaf15 systemRequirement;
  click 767f898924bcaf15 "Configuration.md#ignore-files-integration";
  1fbfcaddda85a6c2 -.->|deriveReqT| 767f898924bcaf15;
  8419dcc77d92b609["config.rs"];
  class 8419dcc77d92b609 default;
  click 8419dcc77d92b609 "../../../cli/src/config.rs";
  3ff9961dd21bf22e -->|satisfiedBy| 8419dcc77d92b609;
  55e6d839dbcc7077["File Exclusion Test"];
  class 55e6d839dbcc7077 verification;
  click 55e6d839dbcc7077 "../../Verifications/ValidationTests.md#file-exclusion-test";
  3ff9961dd21bf22e -.->|verifiedBy| 55e6d839dbcc7077;
  8419dcc77d92b609["config.rs"];
  class 8419dcc77d92b609 default;
  click 8419dcc77d92b609 "../../../cli/src/config.rs";
  767f898924bcaf15 -->|satisfiedBy| 8419dcc77d92b609;
  767f898924bcaf15 -.->|verifiedBy| 55e6d839dbcc7077;
  15ebd3e2c7f049fe["Coexistence of Structured and Unstructured Documents"];
  class 15ebd3e2c7f049fe userRequirement;
  click 15ebd3e2c7f049fe "../../UserRequirements.md#coexistence-of-structured-and-unstructured-documents";
  15ebd3e2c7f049fe -.->|deriveReqT| 1fbfcaddda85a6c2;
```
### Ignoring Unstructured Documents

The system shall support configurable glob patterns to exclude specific files from requirement processing.

#### Details
Exclusion patterns are defined in `.reqvireignore` file at the repository root, using the same format as `.gitignore`:

```.reqvireignore
# Example patterns to exclude from structured documents processing
**/Logical*.md
**/Physical*.md
**/draft-*.md
examples/**
```

The `.reqvireignore` file provides Reqvire-specific exclusions for files that should remain in version control but not be processed as requirements.

#### Relations
  * derivedFrom: [Coexistence of Structured and Unstructured Documents](../../UserRequirements.md#coexistence-of-structured-and-unstructured-documents)
  * satisfiedBy: [config.rs](../../../cli/src/config.rs)
---

### Ignore Files Integration

The system shall read exclusion patterns from the repository root .gitignore file and .reqvireignore file to automatically exclude files from requirement processing.

#### Details
Reqvire integrates with Git workflows by respecting exclusion patterns from two sources:
- **`.gitignore`** - Version control exclusions (files not tracked by Git)
- **`.reqvireignore`** - Reqvire-specific exclusions (files tracked by Git but excluded from requirements processing)

Both ignore files use standard gitignore pattern syntax to exclude files from being parsed as structured markdown (requirements/verifications). However, they differ in an important way:

- **`.gitignore`**: Files matching these patterns are **completely excluded** - they cannot be parsed as structured markdown AND cannot be referenced in file relations to elements
- **`.reqvireignore`**: Files matching these patterns are excluded from structured markdown parsing BUT **can still be referenced** in file relations to elements (useful for design documents, diagrams, or other supporting files that you want to link to but not parse)

**Rules:**
- ONLY the root .gitignore file shall be used (not nested .gitignore files in subdirectories)
- ONLY the root .reqvireignore file shall be used (not nested .reqvireignore files in subdirectories)
- .reqvireignore shall use the same format and syntax as .gitignore
- Patterns from .gitignore and .reqvireignore shall be combined
- Files matching ANY exclusion pattern (from .gitignore or .reqvireignore) shall be excluded from parsing as requirements
- Files excluded by .gitignore shall NOT be usable as relation targets (internal-path type) since they don't exist in the repository
- Files excluded by .reqvireignore shall remain usable as relation targets (internal-path type) since they exist in the repository but are not parsed as requirements
- If .reqvireignore does not exist, the system shall process normally using only .gitignore patterns
- If .gitignore does not exist, the system shall process normally using only .reqvireignore patterns

**Rationale:**
- `.gitignore` integration ensures anything not tracked by version control is also excluded from requirements processing
- `.reqvireignore` provides flexibility to exclude specific files from requirements processing while keeping them in version control (e.g., draft specifications, example files, or documentation that shouldn't be processed as requirements)
- Using a `.reqvireignore` file follows the established convention that developers are familiar with from `.gitignore`, making it more intuitive
- File-based exclusion patterns are more maintainable than configuration-based approaches

#### Relations
  * derivedFrom: [Ignoring Unstructured Documents](#ignoring-unstructured-documents)
  * satisfiedBy: [config.rs](../../../cli/src/config.rs)
---

### Reserved Repository Files Exclusion

The system shall automatically exclude certain common repository documentation files from structured markdown processing.

#### Details
The following reserved filenames are always excluded from structured markdown processing, as they are typically used for general repository documentation purposes rather than system requirements:

- `README.md`
- `CHANGELOG.md`, `CHANGES.md`
- `CONTRIBUTING.md`
- `LICENSE.md`
- `CODE_OF_CONDUCT.md`
- `SECURITY.md`
- `AUTHORS.md`
- `ROADMAP.md`

**Rules:**
- Reserved filenames shall be automatically excluded from structured markdown parsing across the entire repository
- Reserved files can still be referenced in file relations to elements (they are excluded from parsing but can be linked to)
- The exclusion of reserved filenames shall be combined with .gitignore and .reqvireignore patterns
- Files matching reserved filenames shall be excluded from parsing regardless of .gitignore or .reqvireignore configuration

**Rationale:**
- These files serve general repository documentation purposes and should not be processed as structured requirements
- Standard repository files like README.md or LICENSE.md contain free-form documentation rather than structured requirements
- Automatically excluding these files prevents confusion and reduces the need for explicit .reqvireignore patterns

#### Relations
  * derivedFrom: [Ignoring Unstructured Documents](#ignoring-unstructured-documents)
  * satisfiedBy: [config.rs](../../../cli/src/config.rs)
---

## Requirements Processing Logic
```mermaid
graph LR;
  %% REQVIRE-AUTOGENERATED-DIAGRAM
  %% Graph styling
  classDef userRequirement fill:#f9d6d6,stroke:#f55f5f,stroke-width:1px;
  classDef systemRequirement fill:#fce4e4,stroke:#e68a8a,stroke-width:1px;
  classDef verification fill:#d6f9d6,stroke:#5fd75f,stroke-width:1px;
  classDef default fill:#f5f5f5,stroke:#333333,stroke-width:1px;

  45f9231a94c04f4e["Requirements Processing"];
  class 45f9231a94c04f4e systemRequirement;
  click 45f9231a94c04f4e "Configuration.md#requirements-processing";
  d50a859650933e55["model.rs"];
  class d50a859650933e55 default;
  click d50a859650933e55 "../../../core/src/model.rs";
  45f9231a94c04f4e -->|satisfiedBy| d50a859650933e55;
  f22d93285fcd7664["parser.rs"];
  class f22d93285fcd7664 default;
  click f22d93285fcd7664 "../../../core/src/parser.rs";
  45f9231a94c04f4e -->|satisfiedBy| f22d93285fcd7664;
  a4090fe7e30eeae4["Element Content Extraction Test"];
  class a4090fe7e30eeae4 verification;
  click a4090fe7e30eeae4 "../../Verifications/ChangeImpactTests.md#element-content-extraction-test";
  45f9231a94c04f4e -.->|verifiedBy| a4090fe7e30eeae4;
  6ca2ff1567644e78["Same-File Fragment Relations Test"];
  class 6ca2ff1567644e78 verification;
  click 6ca2ff1567644e78 "../../Verifications/ValidationTests.md#same-file-fragment-relations-test";
  45f9231a94c04f4e -.->|verifiedBy| 6ca2ff1567644e78;
  6f1d7610c2419511["Two-Pass Validation Strategy"];
  class 6f1d7610c2419511 systemRequirement;
  click 6f1d7610c2419511 "../ValidationAndReporting/Validation.md#two-pass-validation-strategy";
  45f9231a94c04f4e -.->|deriveReqT| 6f1d7610c2419511;
  e1d08514a32ae308["GraphRegistry as Primary Registry"];
  class e1d08514a32ae308 systemRequirement;
  click e1d08514a32ae308 "../ValidationAndReporting/Validation.md#graphregistry-as-primary-registry";
  45f9231a94c04f4e -.->|deriveReqT| e1d08514a32ae308;
  8e563a19dae4183b["Structured Markdown Files Search and Detection"];
  class 8e563a19dae4183b systemRequirement;
  click 8e563a19dae4183b "Configuration.md#structured-markdown-files-search-and-detection";
  45f9231a94c04f4e -.->|deriveReqT| 8e563a19dae4183b;
  d50a859650933e55["model.rs"];
  class d50a859650933e55 default;
  click d50a859650933e55 "../../../core/src/model.rs";
  8e563a19dae4183b -->|satisfiedBy| d50a859650933e55;
  184bc01c18f5506f["Requirements Files Search and Detection Test"];
  class 184bc01c18f5506f verification;
  click 184bc01c18f5506f "../../Verifications/ValidationTests.md#requirements-files-search-and-detection-test";
  8e563a19dae4183b -.->|verifiedBy| 184bc01c18f5506f;
  1fbfcaddda85a6c2["Ignoring Unstructured Documents"];
  class 1fbfcaddda85a6c2 systemRequirement;
  click 1fbfcaddda85a6c2 "Configuration.md#ignoring-unstructured-documents";
  8419dcc77d92b609["config.rs"];
  class 8419dcc77d92b609 default;
  click 8419dcc77d92b609 "../../../cli/src/config.rs";
  1fbfcaddda85a6c2 -->|satisfiedBy| 8419dcc77d92b609;
  dd454dd5831a33a0["File Pattern Exclusion for Format"];
  class dd454dd5831a33a0 systemRequirement;
  click dd454dd5831a33a0 "../ValidationAndReporting/Formatting.md#file-pattern-exclusion-for-format";
  1fbfcaddda85a6c2 -.->|deriveReqT| dd454dd5831a33a0;
  1fbfcaddda85a6c2 -.->|deriveReqT| 45f9231a94c04f4e;
  3ff9961dd21bf22e["Reserved Repository Files Exclusion"];
  class 3ff9961dd21bf22e systemRequirement;
  click 3ff9961dd21bf22e "Configuration.md#reserved-repository-files-exclusion";
  1fbfcaddda85a6c2 -.->|deriveReqT| 3ff9961dd21bf22e;
  767f898924bcaf15["Ignore Files Integration"];
  class 767f898924bcaf15 systemRequirement;
  click 767f898924bcaf15 "Configuration.md#ignore-files-integration";
  1fbfcaddda85a6c2 -.->|deriveReqT| 767f898924bcaf15;
```
### Requirements Processing

The system shall parse the files in all folders and subfolders from the root of git repository which are not explicitly excluded using .gitignore and .reqvireignore files.

#### Details
File exclusion is handled through:
- .gitignore patterns (files not in version control)
- .reqvireignore patterns (files in version control but excluded from requirements processing)
- Reserved repository files (README.md, LICENSE.md, etc.)

No configuration file is used for this purpose.

#### Relations
  * derivedFrom: [Ignoring Unstructured Documents](#ignoring-unstructured-documents)
  * satisfiedBy: [model.rs](../../../core/src/model.rs)
  * satisfiedBy: [parser.rs](../../../core/src/parser.rs)
---

### Structured Markdown Files Search and Detection

The system shall identify all structured markdown documents available for processing in all directories and sub-directories of the git repository root based on predefined rules.

#### Details
Identification Process:
1. **File Selection**: The process scans all files in the the git repository root and all sub folders.
2. **Excluded Patterns Check**: If a file matches any excluded patterns, it is marked as **not a structured document file**.
3. **File Extension Check**: If the file does not have a `.md` extension, it is marked as **not a structured document file**.

#### Relations
  * derivedFrom: [Requirements Processing](#requirements-processing)
  * satisfiedBy: [model.rs](../../../core/src/model.rs)
---